(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{73:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return c})),t.d(n,"toc",(function(){return l})),t.d(n,"default",(function(){return b}));var a=t(3),i=t(7),r=(t(0),t(87)),o={id:"build_node",title:"Building a Node with LDK"},c={unversionedId:"build_node",id:"build_node",isDocsHomePage:!1,title:"Building a Node with LDK",description:"Introduction",source:"@site/docs/build_node.md",slug:"/build_node",permalink:"/docs/build_node",editUrl:"https://github.com/lightningdevkit/lightningdevkit.org/tree/main/docs/build_node.md",version:"current",sidebar:"someSidebar",previous:{title:"Use Cases for LDK",permalink:"/docs/use_cases"},next:{title:"Key Management",permalink:"/docs/key_mgmt"}},l=[{value:"Introduction",id:"introduction",children:[]},{value:"Setup",id:"setup",children:[{value:"Initialize the <code>FeeEstimator</code>",id:"initialize-the-feeestimator",children:[]},{value:"Initialize the <code>Logger</code>",id:"initialize-the-logger",children:[]},{value:"Initialize the <code>BroadcasterInterface</code>",id:"initialize-the-broadcasterinterface",children:[]},{value:"Initialize <code>Persist</code>",id:"initialize-persist",children:[]},{value:"Initialize the <code>ChainMonitor</code>",id:"initialize-the-chainmonitor",children:[]},{value:"Initialize the <code>KeysManager</code>",id:"initialize-the-keysmanager",children:[]},{value:"Read <code>ChannelMonitor</code> state from disk",id:"read-channelmonitor-state-from-disk",children:[]},{value:"Initialize the <code>ChannelManager</code>",id:"initialize-the-channelmanager",children:[]},{value:"Sync <code>ChannelMonitor</code>s and <code>ChannelManager</code> to chain tip",id:"sync-channelmonitors-and-channelmanager-to-chain-tip",children:[]},{value:"Give <code>ChannelMonitor</code>s to <code>ChainMonitor</code>",id:"give-channelmonitors-to-chainmonitor",children:[]},{value:"Optional: Initialize the <code>NetGraphMsgHandler</code>",id:"optional-initialize-the-netgraphmsghandler",children:[]},{value:"Initialize the <code>PeerManager</code>",id:"initialize-the-peermanager",children:[]},{value:"Initialize networking",id:"initialize-networking",children:[]}]},{value:"Running LDK",id:"running-ldk",children:[{value:"Connected and Disconnected Blocks",id:"connected-and-disconnected-blocks",children:[]},{value:"Handle LDK Events",id:"handle-ldk-events",children:[]},{value:"Persist <code>ChannelManager</code>",id:"persist-channelmanager",children:[]},{value:"Background Processing",id:"background-processing",children:[]}]},{value:"Using LDK",id:"using-ldk",children:[{value:"Opening a Channel",id:"opening-a-channel",children:[]},{value:"Closing a Channel",id:"closing-a-channel",children:[]},{value:"List Channels",id:"list-channels",children:[]},{value:"WIP: Sending/Receiving Payments",id:"wip-sendingreceiving-payments",children:[]},{value:"Connect to Peers",id:"connect-to-peers",children:[]},{value:"List Peers",id:"list-peers",children:[]}]}],s={toc:l};function b(e){var n=e.components,t=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"introduction"},"Introduction"),Object(r.b)("p",null,"This document covers everything you need to make a node using LDK."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"#setup"}),"Setup")," covers everything you need to do to set up LDK on startup."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"#running-ldk"}),"Running LDK")," covers everything you need to do while LDK is running to keep it operational."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"#using-ldk"}),"Using LDK")," covers most lightning operations you'll want to use,\nsuch as opening a channel. Sending and receiving payments are supported but\nnot yet a part of this guide.")),Object(r.b)("p",null,"Note that LDK does not assume that safe shutdown is available, so there is no\nshutdown checklist."),Object(r.b)("h2",{id:"setup"},"Setup"),Object(r.b)("h3",{id:"initialize-the-feeestimator"},"Initialize the ",Object(r.b)("inlineCode",{parentName:"h3"},"FeeEstimator")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," estimating fees for on-chain transactions that LDK wants broadcasted."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," ",Object(r.b)("inlineCode",{parentName:"p"},"FeeEstimator")," that returns static fees"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"// `FeeEstimatorInterface` is a functional interface, so we can implement it\n// with a lambda.\n// Note that 253 is the minimum which can be returned (1 sat/vbyte, rounded up).\nfinal fee_estimator = FeeEstimator.new_impl((confirmation_target -> 253));\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Implementation notes:")," Rather than using static fees, you'll want to fill in\nthe lambda with fetching up-to-date fees from a source like bitcoin core or your\nown API endpoint. To reduce network traffic, you may wish to cache the results."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("em",{parentName:"p"},"none")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"References:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/chain/chaininterface/trait.FeeEstimator.html"}),"Rust docs"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/structs/FeeEstimator.java"}),"Java bindings")),Object(r.b)("h3",{id:"initialize-the-logger"},"Initialize the ",Object(r.b)("inlineCode",{parentName:"h3"},"Logger")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," LDK logging"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," ",Object(r.b)("inlineCode",{parentName:"p"},"Logger")," that prints to the console:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"// `LoggerInterface` is a functional interface, so we can implement it with a\n// lambda.\nfinal logger = Logger.new_impl((String arg) -> System.out.println(arg));\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Implementation notes:")," You'll most likely want to write the logs to a file for debugging purposes."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("em",{parentName:"p"},"none")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"References:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/util/logger/trait.Logger.html"}),"Rust docs"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/structs/Logger.java"}),"Java bindings")),Object(r.b)("h3",{id:"initialize-the-broadcasterinterface"},"Initialize the ",Object(r.b)("inlineCode",{parentName:"h3"},"BroadcasterInterface")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," broadcasting various lightning transactions "),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"// Note that the `tx` argument is a []byte type. \nfinal tx_broadcaster = BroadcasterInterface.new_impl(tx -> {\n    // <insert code to actually broadcast the given transaction here>\n});\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("em",{parentName:"p"},"none")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"References:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/chain/chaininterface/trait.BroadcasterInterface.html"}),"Rust docs"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/structs/BroadcasterInterface.java"}),"Java bindings")),Object(r.b)("h3",{id:"initialize-persist"},"Initialize ",Object(r.b)("inlineCode",{parentName:"h3"},"Persist")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," persisting crucial channel data in a timely manner"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"Persist persister = Persist.new_impl(new Persist.PersistInterface() {\n  @Override\n  public Result_NoneChannelMonitorUpdateErrZ persist_new_channel(OutPoint id, \n    ChannelMonitor data) {\n      byte[] channel_monitor_bytes = data.write();\n      // <insert code to write these bytes to disk, keyed by `id`>\n  }\n\n  @Override\n  public Result_NoneChannelMonitorUpdateErrZ update_persisted_channel(\n    OutPoint id, ChannelMonitorUpdate update, ChannelMonitor data) {\n      byte[] channel_monitor_bytes = data.write();\n      // <insert code to update the `ChannelMonitor`'s file on disk with these\n      // new bytes, keyed by `id`>\n  }\n});\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Implementation notes:")," ChannelMonitors are objects which are capable of responding to on-chain\nevents for a given channel. Thus, you will have one ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelMonitor")," per channel, identified by the\nfunding output ",Object(r.b)("inlineCode",{parentName:"p"},"id"),", above. They are persisted in real-time and the ",Object(r.b)("inlineCode",{parentName:"p"},"Persist")," methods will block\nprogress on sending or receiving payments until they return."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("em",{parentName:"p"},"none")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"References:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/chain/channelmonitor/trait.Persist.html"}),"Rust docs"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/structs/Persist.java"}),"Java bindings")),Object(r.b)("h3",{id:"initialize-the-chainmonitor"},"Initialize the ",Object(r.b)("inlineCode",{parentName:"h3"},"ChainMonitor")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," Tracking one or more ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelMonitor"),"s and using them to monitor the chain for lighting transactions that are relevant to our node, and broadcasting transactions if need be"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," how to initialize a ",Object(r.b)("inlineCode",{parentName:"p"},"ChainMonitor")," if you ",Object(r.b)("em",{parentName:"p"},"are")," running a light client or filtering for transactions"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"Filter tx_filter = Filter.new_impl(new Filter.FilterInterface() {\n    @Override\n    public void register_tx(byte[] txid, byte[] script_pubkey) {\n        // <insert code for you to watch for this transaction on-chain>\n    }\n    \n    @Override\n    void register_output(OutPoint outpoint, byte[] script_pubkey) {\n        // <insert code for you to watch for any transactions that spend this\n        // output on-chain>\n    }\n});\nfinal chain_monitor = ChainMonitor.constructor_new(tx_filter, tx_broadcaster, \n    logger, fee_estimator, persister);\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," how to initialize a ",Object(r.b)("inlineCode",{parentName:"p"},"ChainMonitor")," if you're providing full blocks"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"final chain_monitor = ChainMonitor.constructor_new(null, tx_broadcaster, logger,\n    fee_estimator, persister);\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"FeeEstimator"),", ",Object(r.b)("inlineCode",{parentName:"p"},"Logger"),", ",Object(r.b)("inlineCode",{parentName:"p"},"BroadcasterInterface"),", ",Object(r.b)("inlineCode",{parentName:"p"},"Persist")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Optional dependency:")," ",Object(r.b)("inlineCode",{parentName:"p"},"Filter")," allows LDK to let you know what transactions you should filter blocks for. This is useful if you pre-filter blocks or use compact filters. Otherwise, LDK will need full blocks."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"References:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/chain/chainmonitor/struct.ChainMonitor.html"}),"Rust docs"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/structs/ChainMonitor.java"}),"Java bindings"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/chain/trait.Filter.html"}),"Rust ",Object(r.b)("inlineCode",{parentName:"a"},"Filter")," docs")),Object(r.b)("h3",{id:"initialize-the-keysmanager"},"Initialize the ",Object(r.b)("inlineCode",{parentName:"h3"},"KeysManager")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," providing keys for signing lightning transactions"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"byte[] key_seed = new byte[32];\n// <insert code to fill key_seed with random bytes OR if restarting, reload the\n// seed from disk>\n// Notes about this `KeysManager`:\n// * the current time is part of the parameters because it is used to derive\n//   random numbers from the seed where required, to ensure all random\n//   generation is unique across restarts.\nKeysManager keys_manager = KeysManager.constructor_new(key_seed,\n    System.currentTimeMillis() / 1000,\n    (int) (System.currentTimeMillis() * 1000));\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Implementation notes:")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"See the Key Management guide for more information."),Object(r.b)("li",{parentName:"ul"},"Note that you must write the ",Object(r.b)("inlineCode",{parentName:"li"},"key_seed")," you give to the ",Object(r.b)("inlineCode",{parentName:"li"},"KeysManager")," on\nstartup to disk, and keep using it to initialize the ",Object(r.b)("inlineCode",{parentName:"li"},"KeysManager")," every time\nyou restart. This ",Object(r.b)("inlineCode",{parentName:"li"},"key_seed")," is used to derive your node's secret key (which\ncorresponds to its node pubkey) and all other secret key material.")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," random bytes"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"References:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/chain/keysinterface/struct.KeysManager.html"}),"Rust docs"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/structs/KeysManager.java"}),"Java bindings")),Object(r.b)("h3",{id:"read-channelmonitor-state-from-disk"},"Read ",Object(r.b)("inlineCode",{parentName:"h3"},"ChannelMonitor")," state from disk"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," if LDK is restarting, its channel state will need to be read from disk and fed to the ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager")," on the next step, as well as the ",Object(r.b)("inlineCode",{parentName:"p"},"ChainMonitor")," in the following step."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," reading ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelMonitor"),"s from disk, where each ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelMonitor"),"'s file is named after its funding outpoint:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'// Initialize the array where we\'ll store the `ChannelMonitor`s read from disk.\nfinal ArrayList channel_monitor_list = new ArrayList<>();\n\n// For each monitor stored on disk, deserialize it and place it in `channel_monitors`.\nfor (... : monitor_files) {\n    byte[] channel_monitor_bytes = // read the bytes from disk the same way you\n                                   // wrote them in step "Initialize `Persist`"\n    channel_monitor_list.add(channel_monitor_bytes);\n}\n\n// Convert the ArrayList into an array so we can pass it to `ChannelManagerConstructor` in the next step.\nfinal byte[][] channel_monitors = channel_monitor_list.toArray(new byte[1][]);\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"KeysManager")),Object(r.b)("h3",{id:"initialize-the-channelmanager"},"Initialize the ",Object(r.b)("inlineCode",{parentName:"h3"},"ChannelManager")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," managing channel state"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," initializing ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager")," on a fresh node:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"int block_height = // <insert current chain tip height>;\nfinal channel_manager = ChannelManager.constructor_new(\n    LDKNetwork.LDKNetwork_Bitcoin, fee_estimator, chain_monitor.as_Watch(), \n    tx_broadcaster, logger, keys_manager.as_KeysInterface(), \n    UserConfig.constructor_default(), block_height);\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," initializing ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager")," on restart:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'byte[] serialized_channel_manager = // <insert bytes you would have written in \n                                    // following the later step "Persist \n                                    // channel manager">\nChannelManagerConstructor channel_manager_constructor = new ChannelManagerConstructor(\n  serialized_channel_manager, channel_monitors, keys_manager.as_KeysInterface(),\n  fee_estimator, chain_monitor.as_Watch(), tx_broadcaster, logger);\n\nfinal channel_manager = channel_manager_constructor.channel_manager;\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Implementation notes:")," No methods should be called on ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager")," until\nafter it has been synced and its ",Object(r.b)("inlineCode",{parentName:"p"},"chain::Watch")," has been given the\n",Object(r.b)("inlineCode",{parentName:"p"},"ChannelMonitor"),"s as described in the next two steps."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"KeysManager"),", ",Object(r.b)("inlineCode",{parentName:"p"},"FeeEstimator"),", ",Object(r.b)("inlineCode",{parentName:"p"},"ChainMonitor"),", ",Object(r.b)("inlineCode",{parentName:"p"},"BroadcasterInterface"),", ",Object(r.b)("inlineCode",{parentName:"p"},"Logger"),", channel configuration info, and the set of ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelMonitor"),"s we read from disk in the previous step if restarting"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"References:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/ln/channelmanager/struct.ChannelManager.html"}),"Rust ",Object(r.b)("inlineCode",{parentName:"a"},"ChannelManager")," docs"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/structs/ChannelManager.java"}),"Java ",Object(r.b)("inlineCode",{parentName:"a"},"ChannelManager")," bindings")),Object(r.b)("h3",{id:"sync-channelmonitors-and-channelmanager-to-chain-tip"},"Sync ",Object(r.b)("inlineCode",{parentName:"h3"},"ChannelMonitor"),"s and ",Object(r.b)("inlineCode",{parentName:"h3"},"ChannelManager")," to chain tip"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," ensuring the channel data state is up-to-date with the bitcoin blockchain"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/rust-bitcoin/rust-lightning/blob/c42ea50cc703f03465d52b5fccfc4a90466d9fea/lightning-block-sync/src/init.rs#L95-L103"}),"Rust docs")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Implementation notes:")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"When you read each ",Object(r.b)("inlineCode",{parentName:"li"},"ChannelMonitor")," off of disk, it comes with a blockhash,\nwhich was the last block the ",Object(r.b)("inlineCode",{parentName:"li"},"ChannelMonitor")," saw. The same is true for the\n",Object(r.b)("inlineCode",{parentName:"li"},"ChannelManager"),"."),Object(r.b)("li",{parentName:"ul"},"If the blockhash is on a fork of the main chain, then first you need to\ndisconnect blocks until the ",Object(r.b)("inlineCode",{parentName:"li"},"ChannelMonitor")," or ",Object(r.b)("inlineCode",{parentName:"li"},"ChannelManager")," gets to a\ncommon ancestor with the main chain."),Object(r.b)("li",{parentName:"ul"},"Then you need to connect recent blocks until the ",Object(r.b)("inlineCode",{parentName:"li"},"ChannelMonitor")," or\n",Object(r.b)("inlineCode",{parentName:"li"},"ChannelManager")," is at the current chain tip.")),Object(r.b)("h3",{id:"give-channelmonitors-to-chainmonitor"},"Give ",Object(r.b)("inlineCode",{parentName:"h3"},"ChannelMonitor"),"s to ",Object(r.b)("inlineCode",{parentName:"h3"},"ChainMonitor")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"}," What it's used for:")," ",Object(r.b)("inlineCode",{parentName:"p"},"ChainMonitor")," is responsible for updating the ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelMonitor"),"s during LDK node operation."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"// Note that if you use the ChannelManagerConstructor utility,\n// it handles this for you in chain_sync_completed().\nchannel_manager_constructor.chain_sync_completed();\n")),Object(r.b)("h3",{id:"optional-initialize-the-netgraphmsghandler"},"Optional: Initialize the ",Object(r.b)("inlineCode",{parentName:"h3"},"NetGraphMsgHandler")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," generating routes to send payments over"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," initializing ",Object(r.b)("inlineCode",{parentName:"p"},"NetGraphMsgHandler")," without providing an ",Object(r.b)("inlineCode",{parentName:"p"},"Access")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"final router = NetGraphMsgHandler.constructor_new(new byte[32], null, logger);\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Implementation notes:")," this struct is not required if you are providing your own routes."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"Logger")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Optional dependency:")," ",Object(r.b)("inlineCode",{parentName:"p"},"Access"),", a source of chain information. Recommended to be able to verify channels before adding them to the internal network graph."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"References:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/routing/network_graph/struct.NetGraphMsgHandler.html"}),Object(r.b)("inlineCode",{parentName:"a"},"NetGraphMsgHandler")," Rust docs"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/structs/NetGraphMsgHandler.java"}),"Java bindings"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/chain/trait.Access.html"}),Object(r.b)("inlineCode",{parentName:"a"},"Access")," Rust docs"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/structs/Access.java"}),Object(r.b)("inlineCode",{parentName:"a"},"Access")," Java bindings")),Object(r.b)("h3",{id:"initialize-the-peermanager"},"Initialize the ",Object(r.b)("inlineCode",{parentName:"h3"},"PeerManager")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," managing peer data"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"byte[] random_bytes = new byte[32];\n// <insert code to fill in `random_data` with random bytes>\n\nfinal peer_manager = PeerManager.constructor_new(\n    channel_manager.as_ChannelMessageHandler(), router.as_RoutingMessageHandler(),\n    keys_manager.as_KeysInterface().get_node_secret(), random_bytes, logger);\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Implementation notes:")," if you did not initialize ",Object(r.b)("inlineCode",{parentName:"p"},"NetGraphMsgHandler")," in the previous step, you can initialize your own struct (which can be a dummy struct) that implements ",Object(r.b)("inlineCode",{parentName:"p"},"RoutingMessageHandlerInterface")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager"),", ",Object(r.b)("inlineCode",{parentName:"p"},"RoutingMessageHandlerInterface"),", ",Object(r.b)("inlineCode",{parentName:"p"},"KeysManager"),", random bytes, ",Object(r.b)("inlineCode",{parentName:"p"},"Logger")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"References:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/ln/peer_handler/struct.PeerManager.html"}),"Rust docs"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/structs/PeerManager.java"}),"Java ",Object(r.b)("inlineCode",{parentName:"a"},"PeerManager")," bindings"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/ln/msgs/trait.RoutingMessageHandler.html"}),"Rust ",Object(r.b)("inlineCode",{parentName:"a"},"RoutingMessageHandler")," docs"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/structs/RoutingMessageHandler.java"}),"Java ",Object(r.b)("inlineCode",{parentName:"a"},"RoutingMessageHandler")," bindings")),Object(r.b)("h3",{id:"initialize-networking"},"Initialize networking"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," making peer connections, facilitating peer data to and from LDK"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'final nio_peer_handler;\ntry { \n    nio_peer_handler = new NioPeerHandler(peer_manager); \n} catch (IOException e) { assert false; }\n\n// Start `NioPeerHandler` listening for connections.\nfinal port = 9735;\nnio_peer_handler.bind_listener(new InetSocketAddress("0.0.0.0", port));\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Implementation notes:")," this code sample uses LDK's supplied Java networking battery ",Object(r.b)("inlineCode",{parentName:"p"},"NioPeerHandler")," wrapped around the core LDK object ",Object(r.b)("inlineCode",{parentName:"p"},"PeerManager"),"."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"PeerManager")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"References:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/batteries/NioPeerHandler.java"}),"Java ",Object(r.b)("inlineCode",{parentName:"a"},"NioPeerHandler"))),Object(r.b)("h2",{id:"running-ldk"},"Running LDK"),Object(r.b)("p",null,"This section assumes you've already run all the steps in ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"#setup"}),"Setup"),"."),Object(r.b)("h3",{id:"connected-and-disconnected-blocks"},"Connected and Disconnected Blocks"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," LDK needs to know when blocks are newly connected and disconnected."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"// header is a []byte type, height is `int`, txdata is a \n// TwoTuple<Long, byte[]>[], where the 0th element is the transaction's position \n// in the block (with the coinbase transaction considered position 0) and the 1st \n// element is the transaction bytes\nchannel_manager.block_connected(header, txn, height);\nchain_monitor.block_connected(header, txn, height);\n\nchannel_manager.block_disconnected(header);\nchain_monitor.block_disconnected(header, height);\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Implementation notes:")," blocks must be connected and disconnected in chain order."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager"),", ",Object(r.b)("inlineCode",{parentName:"p"},"ChainMonitor")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"References:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/chain/chainmonitor/struct.ChainMonitor.html#method.block_connected"}),"Rust ",Object(r.b)("inlineCode",{parentName:"a"},"ChainMonitor")," ",Object(r.b)("inlineCode",{parentName:"a"},"block_(dis)connected")," docs"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/lightning/*/lightning/ln/channelmanager/struct.ChannelManager.html#method.block_connected"}),"Rust ",Object(r.b)("inlineCode",{parentName:"a"},"ChannelManager")," ",Object(r.b)("inlineCode",{parentName:"a"},"block_(dis)connected")),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/51638b0070b47ec83459dc7fa74aa823dd890f58/src/main/java/org/ldk/structs/ChainMonitor.java#L17"}),"Java ",Object(r.b)("inlineCode",{parentName:"a"},"ChainMonitor")," ",Object(r.b)("inlineCode",{parentName:"a"},"block_(dis)connected")," bindings"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/51638b0070b47ec83459dc7fa74aa823dd890f58/src/main/java/org/ldk/structs/ChannelManager.java#L136"}),"Java ",Object(r.b)("inlineCode",{parentName:"a"},"ChannelManager")," ",Object(r.b)("inlineCode",{parentName:"a"},"block_(dis)connected")," bindings")),Object(r.b)("h3",{id:"handle-ldk-events"},"Handle LDK Events"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager")," and ",Object(r.b)("inlineCode",{parentName:"p"},"ChainMonitor")," generate events that must be handled by you, such as telling you when a payment has been successfully received or when a funding transaction is ready for broadcast."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," in Rust, of handling these events: ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/TheBlueMatt/rust-lightning-bitcoinrpc/blob/master/src/main.rs#L122"}),"https://github.com/TheBlueMatt/rust-lightning-bitcoinrpc/blob/master/src/main.rs#L122")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"// On startup, start this loop:\nwhile(true) {\n    Event[] channel_manager_events = \n        channel_manager.as_EventsProvider().get_and_clear_pending_events();\n    Event[] chain_monitor_events = \n        chain_monitor.as_EventsProvider().get_and_clear_pending_events();\n\n    Event[] all_events = ArrayUtils.addAll(channel_manager_events, \n        chain_monitor_events);\n    for (Event e: all_events) {\n        // <insert code to handle each event>\n    }\n}\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager"),", ",Object(r.b)("inlineCode",{parentName:"p"},"ChainMonitor")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"References:")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/lightningdevkit/ldk-garbagecollected/blob/main/src/main/java/org/ldk/structs/Event.java"}),"events to handle in Java")),Object(r.b)("h3",{id:"persist-channelmanager"},"Persist ",Object(r.b)("inlineCode",{parentName:"h3"},"ChannelManager")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," keeping ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager"),"'s stored state up-to-date"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," persist ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager")," after each event you handled in the previous step"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"while (true) {\n    // <code from the previous step that handles `ChannelManager` and \n    // `ChainMonitor` events>\n\n    // After the `for` loop in the previous step has handled `all_events`:\n    byte[] channel_manager_bytes_to_write = channel_manager.write();\n    // <insert code that writes these bytes to disk and/or backups>\n}\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Implementation notes:")," if the ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager")," is not persisted properly to disk, there is risk of channels force closing the next time LDK starts up. However, in this situation, no funds other than those used to pay force-closed channel fees are at risk of being lost."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager"),", ",Object(r.b)("inlineCode",{parentName:"p"},"ChainMonitor")),Object(r.b)("h3",{id:"background-processing"},"Background Processing"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"What it's used for:")," running tasks periodically that aren't high-priority:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"ChannelManager"),"'s ",Object(r.b)("inlineCode",{parentName:"li"},"timer_chan_freshness_every_min()")," to broadcast fresh\nchannel updates if needed"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"PeerManager"),"'s ",Object(r.b)("inlineCode",{parentName:"li"},"timer_tick_occurred()")," to ping peers and disconnect from\nthose who haven't responded with pongs")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"while (true) {\n    // <wait 60 seconds>\n    channel_manager.timer_chan_freshness_every_min();\n    // Note: NioPeerHandler handles calling timer_tick_occurred\n}\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager")),Object(r.b)("h2",{id:"using-ldk"},"Using LDK"),Object(r.b)("p",null,"This section assumes you've followed the steps of the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"#setup"}),"Setup")," and ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"#running-ldk"}),"Running LDK"),"."),Object(r.b)("h3",{id:"opening-a-channel"},"Opening a Channel"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'// <insert code to connect to peer via\n// NioPeerHandler.connect(byte[] their_node_id, SocketAddress remote)>\n\n// Create the initial channel of 10000 sats with a push_msat of 1000 and make\n// sure the result is successful. The `42` here can be any value, and it is not\n// used internally in LDK. It will be provided back to you in the\n// `Event.FundingGenerationReady` event as `user_channel_id`.\nbyte[] peer_node_pubkey = <peer node pubkey bytes>;\nResult_NoneAPIErrorZ create_channel_result = channel_manager.create_channel(\n    peer_node_pubkey, 10000, 1000, 42, null);\nassert create_channel_result instanceof Result_NoneAPIErrorZ.Result_NoneAPIErrorZ_OK;\n\n// Ensure we immediately send a `create_channel` message to the counterparty.\nnio_peer_handler.check_events();\n\n// After the peer responds with an `accept_channel` message, an\n// Event.FundingGenerationReady event will be generated.\n\n// In the background event handler thread (see "Handle LDK Events" section\n// above), the FundingGenerationReady event should be handled like this:\nif (e instanceof Event.FundingGenerationReady) {\n    byte[] funding_scriptpubkey = ((Event.FundingGenerationReady) e).output_script;\n    long output_value = ((Event.FundingGenerationReady) e).channel_value_satoshis;\n    // This is the same channel we just created, above:\n    assert ((Event.FundingGenerationReady) e).user_channel_id == 42;\n    // The output is always a P2WSH:\n    assert funding_scriptpubkey.length == 34 && funding_scriptpubkey[0] == 0 &&\n        funding_scriptpubkey[1] == 32;\n\n    // Generate the funding transaction for the channel based on the channel amount\n    NetworkParameters bitcoinj_net =\n        NetworkParameters.fromID(NetworkParameters.ID_MAINNET);\n    Transaction funding_tx = new Transaction(bitcoinj_net);\n    funding_tx.addInput(new TransactionInput(bitcoinj_net, funding, new byte[0]));\n    // Note that all inputs in the funding transaction MUST spend SegWit outputs\n    // (and have witnesses)\n    funding_tx.getInputs().get(0).setWitness(new TransactionWitness(2));\n    funding_tx.getInput(0).getWitness().setPush(0, new byte[]{0x1});\n    funding_tx.addOutput(Coin.SATOSHI.multiply(output_value),\n        new Script(funding_scriptpubkey));\n    short funding_output_index = (short) 0;\n\n    // Give the funding transaction back to the ChannelManager.\n    byte[] chan_id = ((Event.FundingGenerationReady) e).temporary_channel_id;\n    Result_NoneAPIErrorZ funding_res =\n        channel_manager.funding_transaction_generated(chan_id,\n            funding_tx.bitcoinSerialize(), funding_output_index);\n    // funding_transaction_generated should only generate an error if the\n    // transaction didn\'t meet the required format (or the counterparty already\n    // closed the channel on us):\n    assert funding_res instanceof Result_NoneAPIErrorZ.Result_NoneAPIErrorZ_OK;\n\n    // Ensure we immediately send a `funding_created` message to the counterparty.\n    nio_peer_handler.check_events();\n\n    // At this point LDK will exchange the remaining channel open messages with\n    // the counterparty and, when appropriate, broadcast the funding transaction\n    // provided.\n    // Once it confirms, the channel will be open and available for use (indicated\n    // by its presence in `channel_manager.list_usable_channels()`).\n}\n')),Object(r.b)("h3",{id:"closing-a-channel"},"Closing a Channel"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," cooperative close"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"// Assuming 1 open channel\nbyte[] channel_id = channel_manager.list_channels()[0].get_channel_id();\nResult_NoneAPIErrorZ close_result = channel_manager.close_channel(\n    channel_id);\nassert close_result instanceof Result_NoneAPIErrorZ.Result_NoneAPIErrorZ_OK;\n\n// Make sure the peer manager processes this new event.\nnio_peer_handler.check_events();\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")," force/unilateral close"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"// Assuming 1 open channel\nbyte[] channel_id = channel_manager.list_channels()[0].get_channel_id();\nResult_NoneAPIErrorZ channel_manager.force_close_channel(channel_id);\n\n// Make sure the peer manager processes this new event.\nnio_peer_handler.check_events();\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"ChannelManager"),", ",Object(r.b)("inlineCode",{parentName:"p"},"NioPeerHandler")),Object(r.b)("h3",{id:"list-channels"},"List Channels"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"ChannelDetails[] channels = channel_manager.list_channels();\n")),Object(r.b)("h3",{id:"wip-sendingreceiving-payments"},"WIP: Sending/Receiving Payments"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"NOTE: CURRENTLY UNSUPPORTED IN JAVA")),Object(r.b)("p",null,"Currently unsatisfied dependencies:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"a way of constructing ",Object(r.b)("inlineCode",{parentName:"li"},"NodeFeatures")," and ",Object(r.b)("inlineCode",{parentName:"li"},"ChannelFeatures")," LDK structs (which should be exposed soon)"),Object(r.b)("li",{parentName:"ol"},"a way to parse invoices (we need to generate bindings for the ",Object(r.b)("inlineCode",{parentName:"li"},"rust-invoices")," crate)")),Object(r.b)("h3",{id:"connect-to-peers"},"Connect to Peers"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"byte[] peer_pubkey = // insert peer's pubkey bytes\nint peer_port = 9735; // replace this with the peer's port number\nString peer_host = \"192.168.1.2\"; // replace this with the peer's host\nSocketAddress peer_socket_addr = new InetSocketAddress(peer_host, peer_port);\nnio_peer_handler.connect(peer_pubkey, peer_socket_address);\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"PeerManager"),", peer's pubkey/host/port"),Object(r.b)("h3",{id:"list-peers"},"List Peers"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example:")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"byte[][] peer_node_ids = peer_manager.get_peer_node_ids();\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Dependencies:")," ",Object(r.b)("inlineCode",{parentName:"p"},"PeerManager")))}b.isMDXComponent=!0},87:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return g}));var a=t(0),i=t.n(a);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=i.a.createContext({}),b=function(e){var n=i.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},p=function(e){var n=b(e.components);return i.a.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return i.a.createElement(i.a.Fragment,{},n)}},h=i.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=b(t),h=a,g=p["".concat(o,".").concat(h)]||p[h]||d[h]||r;return t?i.a.createElement(g,c(c({ref:n},s),{},{components:t})):i.a.createElement(g,c({ref:n},s))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,o=new Array(r);o[0]=h;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,o[1]=c;for(var s=2;s<r;s++)o[s]=t[s];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,t)}h.displayName="MDXCreateElement"}}]);